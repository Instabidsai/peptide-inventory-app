# Auto-Heal Report

**Date**: 2/26/2026, 5:43:42 AM
**Issues detected**: 2
**Claude Code ran**: Yes
**CC session**: Completed
**Post-fix tsc**: PASS
**Post-fix tests**: PASS
**Auto-pushed**: No

## Issues Detected

### Auto-Captured Runtime Errors

- **Auto Error (fallback): console_error: [app] Partner AI chat error: Failed to send a request to the Edge**: console_error: [app] Partner AI chat error: Failed to send a request to the Edge Function
- **Auto Error (fallback): fetch_error: Fetch failed: Failed to fetch — https://mckkegmkpqdicudnfhor.supaba**: fetch_error: Fetch failed: Failed to fetch — https://mckkegmkpqdicudnfhor.supabase.co/functions/v1/partner-ai-chat

## Claude Code Output

```
Both issues fixed. Here's the summary:

**Root cause:** `use-partner-ai.ts` called `supabase.functions.invoke('partner-ai-chat')` directly, which makes a fetch to the remote Supabase URL (`https://mckkegmkpqdicudnfhor.supabase.co/functions/v1/partner-ai-chat`). In dev mode, this bypasses the Vite proxy and hits CORS/network errors. The admin AI hook (`use-admin-ai.ts`) already had the fix — it uses `fetch('/functions/v1/admin-ai-chat')` through the Vite proxy in dev mode.

**Fix:** Added the same dev-mode proxy pattern to `use-partner-ai.ts` — in dev mode, it fetches through `/functions/v1/partner-ai-chat` (Vite proxy), and in production it uses `supabase.functions.invoke()` as before.

**Verification:**
- `tsc --noEmit` — clean, no type errors
- `vitest run` — 31 test files, 342 tests passed
```

